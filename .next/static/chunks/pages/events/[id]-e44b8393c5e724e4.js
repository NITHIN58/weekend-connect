(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{812:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events/[id]",function(){return t(2601)}])},2601:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return EventDetails}});var r=t(5893),n=t(7294),l=t(1163),a=t(1664),i=t.n(a),components_RegistrationForm=e=>{let{eventId:s,onSuccess:t}=e,[l,a]=(0,n.useState)({name:"",email:""}),[i,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),processRegistration=async e=>{e.preventDefault(),o(""),d(!0);try{let e=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:s,...l})}),r=await e.json();if(!e.ok)throw Error(r.error||"Registration failed");a({name:"",email:""}),t&&t()}catch(e){o(e.message)}finally{d(!1)}},updateField=e=>{let{name:s,value:t}=e.target;a(e=>({...e,[s]:t}))};return(0,r.jsxs)("div",{className:"bg-gray-900 rounded-xl shadow-lg p-6 md:p-8 w-full max-w-md mx-auto border border-gray-800",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Event Registration"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"Please fill in your details below"})]}),(0,r.jsxs)("form",{onSubmit:processRegistration,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-300 mb-1",children:"Full Name"}),(0,r.jsxs)("div",{className:"relative rounded-lg shadow-sm",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",required:!0,value:l.name,onChange:updateField,className:"block w-full pl-10 pr-4 py-2.5 text-white bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors placeholder-gray-500",placeholder:"Enter your full name"})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-300 mb-1",children:"Email Address"}),(0,r.jsxs)("div",{className:"relative rounded-lg shadow-sm",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",required:!0,value:l.email,onChange:updateField,className:"block w-full pl-10 pr-4 py-2.5 text-white bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors placeholder-gray-500",placeholder:"Enter your email address"})]})]}),i&&(0,r.jsx)("div",{className:"mt-4 bg-red-900/50 border border-red-800 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("p",{className:"text-sm text-red-400 font-medium",children:i})]})}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)("button",{type:"submit",disabled:c,className:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md disabled:hover:bg-blue-600",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Registering..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"Complete Registration"}),(0,r.jsx)("svg",{className:"ml-2 -mr-1 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})})]})]})};function EventDetails(){let e=(0,l.useRouter)(),{id:s}=e.query,[t,a]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0),[d,m]=(0,n.useState)(""),[x,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{s&&fetchEvent()},[s]);let fetchEvent=async()=>{try{c(!0);let e=await fetch("/api/events/".concat(s));if(!e.ok)throw Error("Failed to fetch event");let t=await e.json();a(t)}catch(e){m("Failed to load event details"),console.error(e)}finally{c(!1)}};return o?(0,r.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-pulse text-xl text-gray-300",children:"Loading event details..."})}):d||!t?(0,r.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xl text-red-400 mb-4",children:d||"Event not found"}),(0,r.jsxs)(i(),{href:"/events",className:"inline-flex items-center text-blue-400 hover:text-blue-300",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Events"]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-black py-8",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 max-w-4xl",children:[(0,r.jsxs)(i(),{href:"/events",className:"inline-flex items-center text-blue-400 hover:text-blue-300 mb-6",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Events"]}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-xl shadow-lg p-6 md:p-8 mb-8 border border-gray-800",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:t.title}),(0,r.jsxs)("p",{className:"text-gray-300 text-lg",children:[(e=>{if(!e)return"Date not specified";let s=new Date(e);return s.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})(t.date)," at ",t.time]})]}),t.capacity&&(0,r.jsx)("div",{className:"mt-4 md:mt-0 bg-gray-800 px-4 py-2 rounded-lg",children:(0,r.jsxs)("p",{className:"text-blue-400 font-semibold",children:[t.registered_count||0," / ",t.capacity," spots filled"]})})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,r.jsx)("span",{className:"text-gray-300",children:t.location||"Location not specified"})]}),t.category&&(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,r.jsx)("span",{className:"text-gray-300",children:t.category})]})]}),(0,r.jsx)("div",{className:"prose prose-lg prose-invert max-w-none mb-8",children:(0,r.jsx)("p",{className:"text-gray-300",children:t.description})}),!x&&(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("button",{onClick:()=>h(!0),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors duration-200 shadow-md hover:shadow-lg",disabled:t.capacity&&t.registered_count>=t.capacity,children:t.capacity&&t.registered_count>=t.capacity?"Event is Full":(0,r.jsxs)(r.Fragment,{children:["Register Now",(0,r.jsx)("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})})]}),x&&(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsx)(components_RegistrationForm,{eventId:t.id,onSuccess:()=>{h(!1),fetchEvent()}})})]})})}},1163:function(e,s,t){e.exports=t(9974)}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=812)}),_N_E=e.O()}]);